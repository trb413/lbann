<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LBANN: lbann::lbann_callback_variable_minibatch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LBANN
   &#160;<span id="projectnumber">v0.93-258-gb605c24-ci358649499</span>
   </div>
   <div id="projectbrief">LivermoreBigArtificialNeuralNetworkToolkit</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classlbann_1_1lbann__callback__variable__minibatch.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classlbann_1_1lbann__callback__variable__minibatch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lbann::lbann_callback_variable_minibatch Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="callback__variable__minibatch_8hpp_source.html">callback_variable_minibatch.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lbann::lbann_callback_variable_minibatch:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch__inherit__graph.png" border="0" usemap="#lbann_1_1lbann__callback__variable__minibatch_inherit__map" alt="Inheritance graph"/></div>
<map name="lbann_1_1lbann__callback__variable__minibatch_inherit__map" id="lbann_1_1lbann__callback__variable__minibatch_inherit__map">
<area shape="rect" id="node3" href="classlbann_1_1lbann__callback__minibatch__schedule.html" title="lbann::lbann_callback\l_minibatch_schedule" alt="" coords="5,171,152,213"/><area shape="rect" id="node4" href="classlbann_1_1lbann__callback__step__minibatch.html" title="lbann::lbann_callback\l_step_minibatch" alt="" coords="176,171,323,213"/><area shape="rect" id="node2" href="classlbann_1_1lbann__callback.html" title="lbann::lbann_callback" alt="" coords="91,5,237,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for lbann::lbann_callback_variable_minibatch:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch__coll__graph.png" border="0" usemap="#lbann_1_1lbann__callback__variable__minibatch_coll__map" alt="Collaboration graph"/></div>
<map name="lbann_1_1lbann__callback__variable__minibatch_coll__map" id="lbann_1_1lbann__callback__variable__minibatch_coll__map">
<area shape="rect" id="node2" href="classlbann_1_1lbann__callback.html" title="lbann::lbann_callback" alt="" coords="8,96,155,123"/><area shape="rect" id="node3" href="classlbann_1_1lbann__summary.html" title="lbann::lbann_summary" alt="" coords="5,5,157,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a970a03f0d297f8447020e85d23f5ee73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a970a03f0d297f8447020e85d23f5ee73">lbann_callback_variable_minibatch</a> (int starting_mbsize)</td></tr>
<tr class="separator:a970a03f0d297f8447020e85d23f5ee73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ffbb380f1a58b164cfb49ab1b407648"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a7ffbb380f1a58b164cfb49ab1b407648">lbann_callback_variable_minibatch</a> (const <a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann_callback_variable_minibatch</a> &amp;)=default</td></tr>
<tr class="separator:a7ffbb380f1a58b164cfb49ab1b407648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a154f749e29203562d41faf81202e5656"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann_callback_variable_minibatch</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a154f749e29203562d41faf81202e5656">operator=</a> (const <a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann_callback_variable_minibatch</a> &amp;)=default</td></tr>
<tr class="separator:a154f749e29203562d41faf81202e5656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f5d8ab04ab3e1cc3aa66327d3712f51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a4f5d8ab04ab3e1cc3aa66327d3712f51">on_train_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m) override</td></tr>
<tr class="memdesc:a4f5d8ab04ab3e1cc3aa66327d3712f51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the initial mini-batch size.  <a href="#a4f5d8ab04ab3e1cc3aa66327d3712f51">More...</a><br/></td></tr>
<tr class="separator:a4f5d8ab04ab3e1cc3aa66327d3712f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a091e7563b5a7a90638e2521fe39cbf8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a091e7563b5a7a90638e2521fe39cbf8f">on_epoch_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m) override</td></tr>
<tr class="memdesc:a091e7563b5a7a90638e2521fe39cbf8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Potentially change the mini-batch size.  <a href="#a091e7563b5a7a90638e2521fe39cbf8f">More...</a><br/></td></tr>
<tr class="separator:a091e7563b5a7a90638e2521fe39cbf8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlbann_1_1lbann__callback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlbann_1_1lbann__callback')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlbann_1_1lbann__callback.html">lbann::lbann_callback</a></td></tr>
<tr class="memitem:a679057298a41ddd47f08c157f756c584 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a679057298a41ddd47f08c157f756c584">lbann_callback</a> (int batch_interval=1, <a class="el" href="classlbann_1_1lbann__summary.html">lbann_summary</a> *summarizer=nullptr)</td></tr>
<tr class="separator:a679057298a41ddd47f08c157f756c584 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d994616b8bf98685ac32939228f96a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a91d994616b8bf98685ac32939228f96a">lbann_callback</a> (const <a class="el" href="classlbann_1_1lbann__callback.html">lbann_callback</a> &amp;)=default</td></tr>
<tr class="separator:a91d994616b8bf98685ac32939228f96a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66b0a8c00a273669fa782ece59e8898b inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1lbann__callback.html">lbann_callback</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a66b0a8c00a273669fa782ece59e8898b">operator=</a> (const <a class="el" href="classlbann_1_1lbann__callback.html">lbann_callback</a> &amp;)=default</td></tr>
<tr class="separator:a66b0a8c00a273669fa782ece59e8898b inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac91abaec389f8d2547512c45ae587304 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#ac91abaec389f8d2547512c45ae587304">~lbann_callback</a> ()</td></tr>
<tr class="separator:ac91abaec389f8d2547512c45ae587304 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f545d1269a8c7af335625d049691f26 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classlbann_1_1lbann__callback.html">lbann_callback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a9f545d1269a8c7af335625d049691f26">copy</a> () const =0</td></tr>
<tr class="separator:a9f545d1269a8c7af335625d049691f26 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d924df2f8ca851578dc76d9015e48d inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a02d924df2f8ca851578dc76d9015e48d">set_summarizer</a> (<a class="el" href="classlbann_1_1lbann__summary.html">lbann_summary</a> *summarizer)</td></tr>
<tr class="separator:a02d924df2f8ca851578dc76d9015e48d inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5086e27d9bb0a7c7ee8ffc1bc58671 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#aab5086e27d9bb0a7c7ee8ffc1bc58671">setup</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:aab5086e27d9bb0a7c7ee8ffc1bc58671 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af28078b0ddaef45124465bef01eefedf inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#af28078b0ddaef45124465bef01eefedf">on_train_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:af28078b0ddaef45124465bef01eefedf inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace7452239c9ad7aa6247e9496adbcffe inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#ace7452239c9ad7aa6247e9496adbcffe">on_phase_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:ace7452239c9ad7aa6247e9496adbcffe inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ed9498763412a55953fff71ee3a9456 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a4ed9498763412a55953fff71ee3a9456">on_epoch_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a4ed9498763412a55953fff71ee3a9456 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ecf4e44cd4021cdd687de14c850cc83 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a9ecf4e44cd4021cdd687de14c850cc83">on_batch_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a9ecf4e44cd4021cdd687de14c850cc83 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a895ca577e358601fcae5c04749f60535 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a895ca577e358601fcae5c04749f60535">on_batch_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a895ca577e358601fcae5c04749f60535 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a716bff45bdc5a88eed09c2231f5bc93a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a716bff45bdc5a88eed09c2231f5bc93a">on_test_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a716bff45bdc5a88eed09c2231f5bc93a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accbad4dd004c1ced33642db6398b2efe inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#accbad4dd004c1ced33642db6398b2efe">on_test_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:accbad4dd004c1ced33642db6398b2efe inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bde303671110519388d9962bc3e5583 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a2bde303671110519388d9962bc3e5583">on_validation_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a2bde303671110519388d9962bc3e5583 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc16e42e5064dc2dc8d84dfbfc1325eb inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#adc16e42e5064dc2dc8d84dfbfc1325eb">on_validation_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:adc16e42e5064dc2dc8d84dfbfc1325eb inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22ed977371173105b4aad3a20b9c59dc inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a22ed977371173105b4aad3a20b9c59dc">on_forward_prop_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a22ed977371173105b4aad3a20b9c59dc inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96adb1d77180e00fdd668cd381323fd inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#ab96adb1d77180e00fdd668cd381323fd">on_forward_prop_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:ab96adb1d77180e00fdd668cd381323fd inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79a0bb407852d7b330b74373647ffe46 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a79a0bb407852d7b330b74373647ffe46">on_forward_prop_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a79a0bb407852d7b330b74373647ffe46 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eff0a59fbce98a981d9cdd0547a3ad5 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a5eff0a59fbce98a981d9cdd0547a3ad5">on_forward_prop_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:a5eff0a59fbce98a981d9cdd0547a3ad5 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c0709a26179d115ff85b7561786ee27 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a2c0709a26179d115ff85b7561786ee27">on_backward_prop_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a2c0709a26179d115ff85b7561786ee27 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb1e486e259fd358332abf1e952f630 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#abeb1e486e259fd358332abf1e952f630">on_backward_prop_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:abeb1e486e259fd358332abf1e952f630 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af183624e63ba65e0003fa988f53dee0c inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#af183624e63ba65e0003fa988f53dee0c">on_backward_prop_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:af183624e63ba65e0003fa988f53dee0c inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba03b59c056ace8094095c08e39b9ac4 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#aba03b59c056ace8094095c08e39b9ac4">on_backward_prop_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:aba03b59c056ace8094095c08e39b9ac4 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9248b305f06419889c1b3b0f0893d8 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a1a9248b305f06419889c1b3b0f0893d8">on_optimize_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a1a9248b305f06419889c1b3b0f0893d8 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a497e750da160e0071ce8864ccc3a1344 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a497e750da160e0071ce8864ccc3a1344">on_optimize_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1weights.html">weights</a> *w)</td></tr>
<tr class="separator:a497e750da160e0071ce8864ccc3a1344 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235195d5fa4461835b861a03a5c0278f inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a235195d5fa4461835b861a03a5c0278f">on_optimize_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a235195d5fa4461835b861a03a5c0278f inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4653e2903bfd3903709a81eaf7eabc1a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a4653e2903bfd3903709a81eaf7eabc1a">on_optimize_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1weights.html">weights</a> *w)</td></tr>
<tr class="separator:a4653e2903bfd3903709a81eaf7eabc1a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3462e54126adbd0082c22c98d8de5468 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a3462e54126adbd0082c22c98d8de5468">on_batch_evaluate_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a3462e54126adbd0082c22c98d8de5468 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10891b8ab3de74ee1a70e6255e7d58a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#ad10891b8ab3de74ee1a70e6255e7d58a">on_batch_evaluate_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:ad10891b8ab3de74ee1a70e6255e7d58a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a2cff48a688bb56ed14b8b53344f945 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a4a2cff48a688bb56ed14b8b53344f945">on_evaluate_forward_prop_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a4a2cff48a688bb56ed14b8b53344f945 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044174864e4981a1dac093d58e8c4d6c inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a044174864e4981a1dac093d58e8c4d6c">on_evaluate_forward_prop_begin</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:a044174864e4981a1dac093d58e8c4d6c inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0794f3fb88db6fef53f0e2f235f94424 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a0794f3fb88db6fef53f0e2f235f94424">on_evaluate_forward_prop_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m)</td></tr>
<tr class="separator:a0794f3fb88db6fef53f0e2f235f94424 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23c5a61b81dbdfbd79736ac2b6035aa inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#ae23c5a61b81dbdfbd79736ac2b6035aa">on_evaluate_forward_prop_end</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, <a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:ae23c5a61b81dbdfbd79736ac2b6035aa inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d75ab4527a3a966207fa91f8484077 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#aa6d75ab4527a3a966207fa91f8484077">get_batch_interval</a> () const </td></tr>
<tr class="separator:aa6d75ab4527a3a966207fa91f8484077 inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7522c7a14f1d6a1ea762cc2d7248eb3a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a7522c7a14f1d6a1ea762cc2d7248eb3a">name</a> () const =0</td></tr>
<tr class="separator:a7522c7a14f1d6a1ea762cc2d7248eb3a inherit pub_methods_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ace13e8941491ddd28ef35c277cecb1ad"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#ace13e8941491ddd28ef35c277cecb1ad">schedule</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, int &amp;new_mbsize, float &amp;new_lr, int &amp;ramp_time)=0</td></tr>
<tr class="separator:ace13e8941491ddd28ef35c277cecb1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011659ba208ccafbf97724ea8ac8d109"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a011659ba208ccafbf97724ea8ac8d109">change_learning_rate</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m, float new_lr) const </td></tr>
<tr class="memdesc:a011659ba208ccafbf97724ea8ac8d109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the learning rate of every layer in m to new_lr.  <a href="#a011659ba208ccafbf97724ea8ac8d109">More...</a><br/></td></tr>
<tr class="separator:a011659ba208ccafbf97724ea8ac8d109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51aae8871667fdff3e54f13488809382"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a51aae8871667fdff3e54f13488809382">get_current_learning_rate</a> (<a class="el" href="classlbann_1_1model.html">model</a> *m) const </td></tr>
<tr class="memdesc:a51aae8871667fdff3e54f13488809382"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current learning rate (assumes every layer has the same one).  <a href="#a51aae8871667fdff3e54f13488809382">More...</a><br/></td></tr>
<tr class="separator:a51aae8871667fdff3e54f13488809382"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a8e1a314b320f6131d0eecbff69aeb2b8"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a8e1a314b320f6131d0eecbff69aeb2b8">m_starting_mbsize</a></td></tr>
<tr class="memdesc:a8e1a314b320f6131d0eecbff69aeb2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial mini-batch size.  <a href="#a8e1a314b320f6131d0eecbff69aeb2b8">More...</a><br/></td></tr>
<tr class="separator:a8e1a314b320f6131d0eecbff69aeb2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6488bd1f45110a1cb22553e5035003de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a6488bd1f45110a1cb22553e5035003de">m_current_mini_batch_size</a></td></tr>
<tr class="separator:a6488bd1f45110a1cb22553e5035003de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7beea78ef7107c88cb8782d3af618117"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#a7beea78ef7107c88cb8782d3af618117">m_ramp_count</a> = 0</td></tr>
<tr class="memdesc:a7beea78ef7107c88cb8782d3af618117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current number of epochs left to ramp the learning rate.  <a href="#a7beea78ef7107c88cb8782d3af618117">More...</a><br/></td></tr>
<tr class="separator:a7beea78ef7107c88cb8782d3af618117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac78d3d357e1c16b3303cf358aee8a83d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html#ac78d3d357e1c16b3303cf358aee8a83d">m_lr_incr</a> = 0.0f</td></tr>
<tr class="memdesc:ac78d3d357e1c16b3303cf358aee8a83d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Amount to increment the learning rate by when ramping.  <a href="#ac78d3d357e1c16b3303cf358aee8a83d">More...</a><br/></td></tr>
<tr class="separator:ac78d3d357e1c16b3303cf358aee8a83d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classlbann_1_1lbann__callback"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classlbann_1_1lbann__callback')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classlbann_1_1lbann__callback.html">lbann::lbann_callback</a></td></tr>
<tr class="memitem:a6126e310e9924398c18ccf76bb91c705 inherit pro_attribs_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a6126e310e9924398c18ccf76bb91c705">m_batch_interval</a></td></tr>
<tr class="separator:a6126e310e9924398c18ccf76bb91c705 inherit pro_attribs_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a277d46138184f85f161a8263b8322c76 inherit pro_attribs_classlbann_1_1lbann__callback"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1lbann__summary.html">lbann_summary</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1lbann__callback.html#a277d46138184f85f161a8263b8322c76">m_summarizer</a></td></tr>
<tr class="separator:a277d46138184f85f161a8263b8322c76 inherit pro_attribs_classlbann_1_1lbann__callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support changing the mini-batch size on different schedules. Implementations should override implement the abstract methods to define concrete schedules. </p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8hpp_source.html#l00041">41</a> of file <a class="el" href="callback__variable__minibatch_8hpp_source.html">callback_variable_minibatch.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a970a03f0d297f8447020e85d23f5ee73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::lbann_callback_variable_minibatch::lbann_callback_variable_minibatch </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>starting_mbsize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="callback__variable__minibatch_8cpp_source.html#l00036">36</a> of file <a class="el" href="callback__variable__minibatch_8cpp_source.html">callback_variable_minibatch.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                       : <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a8e1a314b320f6131d0eecbff69aeb2b8">m_starting_mbsize</a>(starting_mbsize),</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                         <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a6488bd1f45110a1cb22553e5035003de">m_current_mini_batch_size</a>(starting_mbsize) {}</div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_a8e1a314b320f6131d0eecbff69aeb2b8"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#a8e1a314b320f6131d0eecbff69aeb2b8">lbann::lbann_callback_variable_minibatch::m_starting_mbsize</a></div><div class="ttdeci">const int m_starting_mbsize</div><div class="ttdoc">Initial mini-batch size. </div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8hpp_source.html#l00073">callback_variable_minibatch.hpp:73</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_a6488bd1f45110a1cb22553e5035003de"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#a6488bd1f45110a1cb22553e5035003de">lbann::lbann_callback_variable_minibatch::m_current_mini_batch_size</a></div><div class="ttdeci">int m_current_mini_batch_size</div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8hpp_source.html#l00080">callback_variable_minibatch.hpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ffbb380f1a58b164cfb49ab1b407648"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lbann::lbann_callback_variable_minibatch::lbann_callback_variable_minibatch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann_callback_variable_minibatch</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a011659ba208ccafbf97724ea8ac8d109"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::lbann_callback_variable_minibatch::change_learning_rate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlbann_1_1model.html">model</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>new_lr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change the learning rate of every layer in m to new_lr. </p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8cpp_source.html#l00116">116</a> of file <a class="el" href="callback__variable__minibatch_8cpp_source.html">callback_variable_minibatch.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">for</span> (weights *w : m-&gt;get_weights()) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    optimizer *opt = w-&gt;get_optimizer();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (opt != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      opt-&gt;set_learning_rate(new_lr);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_cgraph.png" border="0" usemap="#classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_cgraph" alt=""/></div>
<map name="classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_cgraph" id="classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1model.html#a91cd652cf6cad2830857a48a17742654" title="lbann::model::get_weights" alt="" coords="201,5,375,32"/><area shape="rect" id="node3" href="classlbann_1_1optimizer.html#a147cac09beaa17df4e0fc1fc1be3abce" title="lbann::optimizer::set\l_learning_rate" alt="" coords="218,57,358,98"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_icgraph.png" border="0" usemap="#classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_icgraph" alt=""/></div>
<map name="classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_icgraph" id="classlbann_1_1lbann__callback__variable__minibatch_a011659ba208ccafbf97724ea8ac8d109_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__callback__variable__minibatch.html#a091e7563b5a7a90638e2521fe39cbf8f" title="Potentially change the mini&#45;batch size. " alt="" coords="200,4,347,60"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a51aae8871667fdff3e54f13488809382"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lbann::lbann_callback_variable_minibatch::get_current_learning_rate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlbann_1_1model.html">model</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current learning rate (assumes every layer has the same one). </p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8cpp_source.html#l00126">126</a> of file <a class="el" href="callback__variable__minibatch_8cpp_source.html">callback_variable_minibatch.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                  {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">for</span> (weights *w : m-&gt;get_weights()) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    optimizer *opt = w-&gt;get_optimizer();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (opt != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">return</span> opt-&gt;get_learning_rate();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_cgraph.png" border="0" usemap="#classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_cgraph" alt=""/></div>
<map name="classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_cgraph" id="classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1model.html#a91cd652cf6cad2830857a48a17742654" title="lbann::model::get_weights" alt="" coords="222,5,397,32"/><area shape="rect" id="node3" href="classlbann_1_1optimizer.html#a3d43f99cf93668b9a1a1974a47cf644a" title="lbann::optimizer::get\l_learning_rate" alt="" coords="239,57,379,98"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_icgraph.png" border="0" usemap="#classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_icgraph" alt=""/></div>
<map name="classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_icgraph" id="classlbann_1_1lbann__callback__variable__minibatch_a51aae8871667fdff3e54f13488809382_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__callback__variable__minibatch.html#a091e7563b5a7a90638e2521fe39cbf8f" title="Potentially change the mini&#45;batch size. " alt="" coords="237,5,384,61"/><area shape="rect" id="node3" href="classlbann_1_1lbann__callback__step__minibatch.html#a9ed85aa78f6e4fe4cf3427f9257a4610" title="lbann::lbann_callback\l_step_minibatch::schedule" alt="" coords="222,85,399,126"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a091e7563b5a7a90638e2521fe39cbf8f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::lbann_callback_variable_minibatch::on_epoch_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlbann_1_1model.html">model</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Potentially change the mini-batch size. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1lbann__callback.html#a1fc71110e7f754bf73c9e0f344a448a5">lbann::lbann_callback</a>.</p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8cpp_source.html#l00063">63</a> of file <a class="el" href="callback__variable__minibatch_8cpp_source.html">callback_variable_minibatch.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                                             {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keyword">auto</span>* input = <span class="keyword">dynamic_cast&lt;</span>generic_input_layer*<span class="keyword">&gt;</span>(m-&gt;get_layers()[0]);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  lbann_comm *<a class="code" href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a> = m-&gt;get_comm();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordtype">int</span> new_mbsize = 0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">float</span> new_lr = 0.0f;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordtype">int</span> ramp_time = 0;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#ace13e8941491ddd28ef35c277cecb1ad">schedule</a>(m, new_mbsize, new_lr, ramp_time)) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (new_mbsize &gt; m-&gt;get_max_mini_batch_size()) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordflow">if</span> (comm-&gt;am_model_master()) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;Model &quot;</span> &lt;&lt; comm-&gt;get_model_rank() &lt;&lt; <span class="stringliteral">&quot;: WARNING &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;          <span class="stringliteral">&quot;requested new mini-batch size &quot;</span> &lt;&lt; new_mbsize &lt;&lt;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;          <span class="stringliteral">&quot; is greater than the model maximum mini-batch size &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;          m-&gt;get_max_mini_batch_size() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      new_mbsize = m-&gt;get_max_mini_batch_size();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    input-&gt;calculate_num_iterations_per_epoch_training_spans_models(new_mbsize);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a6488bd1f45110a1cb22553e5035003de">m_current_mini_batch_size</a> = new_mbsize;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a7beea78ef7107c88cb8782d3af618117">m_ramp_count</a> = ramp_time;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (new_lr != 0.0f) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">if</span> (ramp_time == 0) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// Change learning rate immediately.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a011659ba208ccafbf97724ea8ac8d109">change_learning_rate</a>(m, new_lr);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">// Compute the per-epoch learning rate increment.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordtype">float</span> cur_lr = <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a51aae8871667fdff3e54f13488809382">get_current_learning_rate</a>(m);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#ac78d3d357e1c16b3303cf358aee8a83d">m_lr_incr</a> = (new_lr - cur_lr) / ramp_time;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordflow">if</span> (comm-&gt;am_model_master()) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;Model &quot;</span> &lt;&lt; comm-&gt;get_model_rank() &lt;&lt;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          <span class="stringliteral">&quot;: Changing mini-batch size to &quot;</span> &lt;&lt; new_mbsize &lt;&lt;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          <span class="stringliteral">&quot; and learning rate to &quot;</span> &lt;&lt; new_lr &lt;&lt; <span class="stringliteral">&quot; at epoch &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;          m-&gt;get_cur_epoch() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (comm-&gt;am_model_master()) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Model &quot;</span> &lt;&lt; comm-&gt;get_model_rank() &lt;&lt;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="stringliteral">&quot;: Changing mini-batch size to &quot;</span> &lt;&lt; new_mbsize &lt;&lt;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="stringliteral">&quot; at epoch &quot;</span> &lt;&lt; m-&gt;get_cur_epoch() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// Ramp the learning rate, if needed.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a7beea78ef7107c88cb8782d3af618117">m_ramp_count</a> &gt; 0) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    --<a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a7beea78ef7107c88cb8782d3af618117">m_ramp_count</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">float</span> target_lr = <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a51aae8871667fdff3e54f13488809382">get_current_learning_rate</a>(m) + <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#ac78d3d357e1c16b3303cf358aee8a83d">m_lr_incr</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a011659ba208ccafbf97724ea8ac8d109">change_learning_rate</a>(m, target_lr);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (comm-&gt;am_model_master()) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Model &quot;</span> &lt;&lt; comm-&gt;get_model_rank() &lt;&lt;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="stringliteral">&quot;: Variable-size mini-batch ramping learning rate to &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        target_lr &lt;&lt; std::endl;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_a7beea78ef7107c88cb8782d3af618117"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#a7beea78ef7107c88cb8782d3af618117">lbann::lbann_callback_variable_minibatch::m_ramp_count</a></div><div class="ttdeci">int m_ramp_count</div><div class="ttdoc">Current number of epochs left to ramp the learning rate. </div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8hpp_source.html#l00082">callback_variable_minibatch.hpp:82</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_a51aae8871667fdff3e54f13488809382"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#a51aae8871667fdff3e54f13488809382">lbann::lbann_callback_variable_minibatch::get_current_learning_rate</a></div><div class="ttdeci">float get_current_learning_rate(model *m) const </div><div class="ttdoc">Get the current learning rate (assumes every layer has the same one). </div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8cpp_source.html#l00126">callback_variable_minibatch.cpp:126</a></div></div>
<div class="ttc" id="file__io_8cpp_html_ab048c6f9fcbcfaa57ce68b00263dbebe"><div class="ttname"><a href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a></div><div class="ttdeci">static MPI_Comm comm</div><div class="ttdef"><b>Definition:</b> <a href="file__io_8cpp_source.html#l00044">file_io.cpp:44</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_ace13e8941491ddd28ef35c277cecb1ad"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#ace13e8941491ddd28ef35c277cecb1ad">lbann::lbann_callback_variable_minibatch::schedule</a></div><div class="ttdeci">virtual bool schedule(model *m, int &amp;new_mbsize, float &amp;new_lr, int &amp;ramp_time)=0</div></div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_a6488bd1f45110a1cb22553e5035003de"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#a6488bd1f45110a1cb22553e5035003de">lbann::lbann_callback_variable_minibatch::m_current_mini_batch_size</a></div><div class="ttdeci">int m_current_mini_batch_size</div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8hpp_source.html#l00080">callback_variable_minibatch.hpp:80</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_ac78d3d357e1c16b3303cf358aee8a83d"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#ac78d3d357e1c16b3303cf358aee8a83d">lbann::lbann_callback_variable_minibatch::m_lr_incr</a></div><div class="ttdeci">float m_lr_incr</div><div class="ttdoc">Amount to increment the learning rate by when ramping. </div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8hpp_source.html#l00084">callback_variable_minibatch.hpp:84</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_a011659ba208ccafbf97724ea8ac8d109"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#a011659ba208ccafbf97724ea8ac8d109">lbann::lbann_callback_variable_minibatch::change_learning_rate</a></div><div class="ttdeci">void change_learning_rate(model *m, float new_lr) const </div><div class="ttdoc">Change the learning rate of every layer in m to new_lr. </div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8cpp_source.html#l00116">callback_variable_minibatch.cpp:116</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch_a091e7563b5a7a90638e2521fe39cbf8f_cgraph.png" border="0" usemap="#classlbann_1_1lbann__callback__variable__minibatch_a091e7563b5a7a90638e2521fe39cbf8f_cgraph" alt=""/></div>
<map name="classlbann_1_1lbann__callback__variable__minibatch_a091e7563b5a7a90638e2521fe39cbf8f_cgraph" id="classlbann_1_1lbann__callback__variable__minibatch_a091e7563b5a7a90638e2521fe39cbf8f_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1model.html#aa2743fb2bd6cf5720c780743fe31fbf8" title="lbann::model::get_layers" alt="" coords="202,5,366,32"/><area shape="rect" id="node3" href="classlbann_1_1model.html#aa837a468e77991314053a93441d111ca" title="lbann::model::get_comm" alt="" coords="201,56,367,83"/><area shape="rect" id="node4" href="classlbann_1_1lbann__callback__variable__minibatch.html#ace13e8941491ddd28ef35c277cecb1ad" title="lbann::lbann_callback\l_variable_minibatch::\lschedule" alt="" coords="211,107,357,163"/><area shape="rect" id="node5" href="classlbann_1_1model.html#a7c37a886565aaee121b7de862d8c06ad" title="lbann::model::get_max\l_mini_batch_size" alt="" coords="207,186,361,227"/><area shape="rect" id="node6" href="classlbann_1_1lbann__comm.html#a06a31f9df1860358ef0ef68d9e165cac" title="lbann::lbann_comm::\lam_model_master" alt="" coords="213,251,355,293"/><area shape="rect" id="node9" href="classlbann_1_1lbann__comm.html#a6c201108eb6b5a1e23021db29cef655b" title="lbann::lbann_comm::\lget_model_rank" alt="" coords="213,317,355,358"/><area shape="rect" id="node10" href="classlbann_1_1lbann__callback__variable__minibatch.html#a011659ba208ccafbf97724ea8ac8d109" title="Change the learning rate of every layer in m to new_lr. " alt="" coords="211,381,357,437"/><area shape="rect" id="node13" href="classlbann_1_1lbann__callback__variable__minibatch.html#a51aae8871667fdff3e54f13488809382" title="Get the current learning rate (assumes every layer has the same one). " alt="" coords="200,461,368,517"/><area shape="rect" id="node15" href="classlbann_1_1model.html#a675b1c6cb1a0eabca80d6a6de1fbbb08" title="lbann::model::get_cur\l_epoch" alt="" coords="211,541,357,582"/><area shape="rect" id="node7" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656" title="lbann::lbann_comm::\lget_rank_in_model" alt="" coords="433,219,575,261"/><area shape="rect" id="node8" href="classlbann_1_1lbann__comm.html#ad61b35af881db9671f3d71ddbf1ced3f" title="lbann::lbann_comm::\lget_model_master" alt="" coords="433,285,575,326"/><area shape="rect" id="node11" href="classlbann_1_1model.html#a91cd652cf6cad2830857a48a17742654" title="lbann::model::get_weights" alt="" coords="417,436,591,463"/><area shape="rect" id="node12" href="classlbann_1_1optimizer.html#a147cac09beaa17df4e0fc1fc1be3abce" title="lbann::optimizer::set\l_learning_rate" alt="" coords="434,370,574,411"/><area shape="rect" id="node14" href="classlbann_1_1optimizer.html#a3d43f99cf93668b9a1a1974a47cf644a" title="lbann::optimizer::get\l_learning_rate" alt="" coords="434,487,574,529"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4f5d8ab04ab3e1cc3aa66327d3712f51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::lbann_callback_variable_minibatch::on_train_begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlbann_1_1model.html">model</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the initial mini-batch size. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1lbann__callback.html#a7c8f0d211967ccc5219144e92571ab26">lbann::lbann_callback</a>.</p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8cpp_source.html#l00040">40</a> of file <a class="el" href="callback__variable__minibatch_8cpp_source.html">callback_variable_minibatch.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                                                               {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// Avoid issues with the train method being called multiple times.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">if</span> (m-&gt;get_cur_epoch() != 0) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  }</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">auto</span>* input = <span class="keyword">dynamic_cast&lt;</span>generic_input_layer*<span class="keyword">&gt;</span>(m-&gt;get_layers()[0]);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">if</span> (!input) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;variable_minibatch: could not get input layer&quot;</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  }</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a8e1a314b320f6131d0eecbff69aeb2b8">m_starting_mbsize</a> &gt; m-&gt;get_max_mini_batch_size()) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">throw</span> lbann_exception(</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="stringliteral">&quot;variable_minibatch: starting mini-batch size is larger than max&quot;</span>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a8e1a314b320f6131d0eecbff69aeb2b8">m_starting_mbsize</a> == m-&gt;get_max_mini_batch_size()) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (m-&gt;get_comm()-&gt;am_world_master()) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;WARNING: starting mini-batch size equals max mini-batch &quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;size and using variable-sized mini-batches&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  input-&gt;calculate_num_iterations_per_epoch_training_spans_models(</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="classlbann_1_1lbann__callback__variable__minibatch.html#a8e1a314b320f6131d0eecbff69aeb2b8">m_starting_mbsize</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1lbann__callback__variable__minibatch_html_a8e1a314b320f6131d0eecbff69aeb2b8"><div class="ttname"><a href="classlbann_1_1lbann__callback__variable__minibatch.html#a8e1a314b320f6131d0eecbff69aeb2b8">lbann::lbann_callback_variable_minibatch::m_starting_mbsize</a></div><div class="ttdeci">const int m_starting_mbsize</div><div class="ttdoc">Initial mini-batch size. </div><div class="ttdef"><b>Definition:</b> <a href="callback__variable__minibatch_8hpp_source.html#l00073">callback_variable_minibatch.hpp:73</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch_a4f5d8ab04ab3e1cc3aa66327d3712f51_cgraph.png" border="0" usemap="#classlbann_1_1lbann__callback__variable__minibatch_a4f5d8ab04ab3e1cc3aa66327d3712f51_cgraph" alt=""/></div>
<map name="classlbann_1_1lbann__callback__variable__minibatch_a4f5d8ab04ab3e1cc3aa66327d3712f51_cgraph" id="classlbann_1_1lbann__callback__variable__minibatch_a4f5d8ab04ab3e1cc3aa66327d3712f51_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1model.html#a675b1c6cb1a0eabca80d6a6de1fbbb08" title="lbann::model::get_cur\l_epoch" alt="" coords="209,5,356,46"/><area shape="rect" id="node3" href="classlbann_1_1model.html#aa2743fb2bd6cf5720c780743fe31fbf8" title="lbann::model::get_layers" alt="" coords="201,71,365,97"/><area shape="rect" id="node4" href="classlbann_1_1model.html#a7c37a886565aaee121b7de862d8c06ad" title="lbann::model::get_max\l_mini_batch_size" alt="" coords="205,122,360,163"/><area shape="rect" id="node5" href="classlbann_1_1model.html#aa837a468e77991314053a93441d111ca" title="lbann::model::get_comm" alt="" coords="200,188,365,215"/><area shape="rect" id="node6" href="classlbann_1_1lbann__comm.html#adb87fdc17095efd8e4dcb343357a6ba5" title="lbann::lbann_comm::\lam_world_master" alt="" coords="211,239,354,281"/><area shape="rect" id="node7" href="classlbann_1_1lbann__comm.html#a615265cd20ffb4863089bb94e4c82fe7" title="lbann::lbann_comm::\lget_rank_in_world" alt="" coords="414,206,557,247"/><area shape="rect" id="node9" href="classlbann_1_1lbann__comm.html#ac1bcd6a5e38ad3a7e86171435642bc9f" title="lbann::lbann_comm::\lget_world_master" alt="" coords="414,271,557,313"/><area shape="rect" id="node8" href="classlbann_1_1lbann__comm.html#a8431a8ec85cc2a146d4fd0f579f7b73f" title="lbann::lbann_comm::\lget_world_comm" alt="" coords="606,206,749,247"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a154f749e29203562d41faf81202e5656"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann_callback_variable_minibatch</a>&amp; lbann::lbann_callback_variable_minibatch::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann_callback_variable_minibatch</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ace13e8941491ddd28ef35c277cecb1ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool lbann::lbann_callback_variable_minibatch::schedule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlbann_1_1model.html">model</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>new_mbsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;&#160;</td>
          <td class="paramname"><em>new_lr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>ramp_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Implemented by child classes to provide the mini-batch/learning schedule. This is called at the end of every training epoch. If it returns false, no changes are made from the currently established schedule. If this returns true, the mini-batch size will be changed accordingly. If the mini-batch size is larger than the model's maximum mini-batch size, a warning is printed and the maximum mini-batch size is used. If new_lr also non-zero, the learning rate will be changed to new_lr, with a linear ramp time. (If ramp_time is 0, it is changed immediately.) Note changing the learning rate while in a ramp may lead to unexpected behavior; also be aware of interactions with other learning rate schedules. </p>

<p>Implemented in <a class="el" href="classlbann_1_1lbann__callback__minibatch__schedule.html#af95cbe83a587590219174cb17828ea4b">lbann::lbann_callback_minibatch_schedule</a>, and <a class="el" href="classlbann_1_1lbann__callback__step__minibatch.html#a9ed85aa78f6e4fe4cf3427f9257a4610">lbann::lbann_callback_step_minibatch</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1lbann__callback__variable__minibatch_ace13e8941491ddd28ef35c277cecb1ad_icgraph.png" border="0" usemap="#classlbann_1_1lbann__callback__variable__minibatch_ace13e8941491ddd28ef35c277cecb1ad_icgraph" alt=""/></div>
<map name="classlbann_1_1lbann__callback__variable__minibatch_ace13e8941491ddd28ef35c277cecb1ad_icgraph" id="classlbann_1_1lbann__callback__variable__minibatch_ace13e8941491ddd28ef35c277cecb1ad_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__callback__variable__minibatch.html#a091e7563b5a7a90638e2521fe39cbf8f" title="Potentially change the mini&#45;batch size. " alt="" coords="200,4,347,60"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a6488bd1f45110a1cb22553e5035003de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::lbann_callback_variable_minibatch::m_current_mini_batch_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current mini-batch size for this epoch. This is kept separately from the model's get_current_mini_batch_size() method, as calling that in on_epoch_end returns the size of the last mini- batch, not the "base" mini-batch. </p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8hpp_source.html#l00080">80</a> of file <a class="el" href="callback__variable__minibatch_8hpp_source.html">callback_variable_minibatch.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac78d3d357e1c16b3303cf358aee8a83d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lbann::lbann_callback_variable_minibatch::m_lr_incr = 0.0f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Amount to increment the learning rate by when ramping. </p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8hpp_source.html#l00084">84</a> of file <a class="el" href="callback__variable__minibatch_8hpp_source.html">callback_variable_minibatch.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7beea78ef7107c88cb8782d3af618117"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::lbann_callback_variable_minibatch::m_ramp_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current number of epochs left to ramp the learning rate. </p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8hpp_source.html#l00082">82</a> of file <a class="el" href="callback__variable__minibatch_8hpp_source.html">callback_variable_minibatch.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8e1a314b320f6131d0eecbff69aeb2b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int lbann::lbann_callback_variable_minibatch::m_starting_mbsize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initial mini-batch size. </p>

<p>Definition at line <a class="el" href="callback__variable__minibatch_8hpp_source.html#l00073">73</a> of file <a class="el" href="callback__variable__minibatch_8hpp_source.html">callback_variable_minibatch.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/travis/build/LLNL/lbann/include/lbann/callbacks/<a class="el" href="callback__variable__minibatch_8hpp_source.html">callback_variable_minibatch.hpp</a></li>
<li>/home/travis/build/LLNL/lbann/src/callbacks/<a class="el" href="callback__variable__minibatch_8cpp_source.html">callback_variable_minibatch.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacelbann.html">lbann</a></li><li class="navelem"><a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann_callback_variable_minibatch</a></li>
    <li class="footer">Generated on Mon Mar 26 2018 23:07:41 for LBANN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
