<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LBANN: lbann::distributed_minibatch_parallel_io Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LBANN
   &#160;<span id="projectnumber">f8dc4a5-ci240028502</span>
   </div>
   <div id="projectbrief">LivermoreBigArtificialNeuralNetworkToolkit</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classlbann_1_1distributed__minibatch__parallel__io.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classlbann_1_1distributed__minibatch__parallel__io-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lbann::distributed_minibatch_parallel_io Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lbann::distributed_minibatch_parallel_io:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io__inherit__graph.png" border="0" usemap="#lbann_1_1distributed__minibatch__parallel__io_inherit__map" alt="Inheritance graph"/></div>
<map name="lbann_1_1distributed__minibatch__parallel__io_inherit__map" id="lbann_1_1distributed__minibatch__parallel__io_inherit__map">
<area shape="rect" id="node2" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html" title="lbann::input_layer\l_distributed_minibatch\l_parallel_io" alt="" coords="205,5,357,61"/><area shape="rect" id="node3" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html" title="lbann::target_layer\l_distributed_minibatch\l_parallel_io" alt="" coords="205,85,357,141"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for lbann::distributed_minibatch_parallel_io:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io__coll__graph.png" border="0" usemap="#lbann_1_1distributed__minibatch__parallel__io_coll__map" alt="Collaboration graph"/></div>
<map name="lbann_1_1distributed__minibatch__parallel__io_coll__map" id="lbann_1_1distributed__minibatch__parallel__io_coll__map">
<area shape="rect" id="node2" href="classlbann_1_1lbann__comm.html" title="lbann::lbann_comm" alt="" coords="13,5,147,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa35307f86d664e0fd3cc98a645f1589d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa35307f86d664e0fd3cc98a645f1589d">distributed_minibatch_parallel_io</a> (<a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *<a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>, int num_parallel_readers, <a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mini_batch_size, std::map&lt; <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>, <a class="el" href="classlbann_1_1DataReader.html">DataReader</a> * &gt; data_readers)</td></tr>
<tr class="separator:aa35307f86d664e0fd3cc98a645f1589d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5cc95374bcb47c97105b387950ca8e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad5cc95374bcb47c97105b387950ca8e1">fetch_to_local_matrix</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local)</td></tr>
<tr class="separator:ad5cc95374bcb47c97105b387950ca8e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d6b3b6740f91ef083eeac3cc52c10a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ac5d6b3b6740f91ef083eeac3cc52c10a">distribute_from_local_matrix</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local, <a class="el" href="lbann__base_8hpp.html#aaf89a79f1476644edba844c4937abbcc">CircMat</a> &amp;Ms)</td></tr>
<tr class="separator:ac5d6b3b6740f91ef083eeac3cc52c10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17aa20ba6b971b6433da058be0d4545a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a17aa20ba6b971b6433da058be0d4545a">is_data_set_processed</a> ()</td></tr>
<tr class="separator:a17aa20ba6b971b6433da058be0d4545a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63fb14ed9851fdebd6fde53a15b450d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">get_num_parallel_readers</a> ()</td></tr>
<tr class="separator:ae63fb14ed9851fdebd6fde53a15b450d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62a8e46c053771fe20831f81aeb0a25"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa62a8e46c053771fe20831f81aeb0a25">fetch_from_data_reader</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local)</td></tr>
<tr class="separator:aa62a8e46c053771fe20831f81aeb0a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc0bb9e26d23850e19f00663bee86bcd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#acc0bb9e26d23850e19f00663bee86bcd">preprocess_data_samples</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local, int num_samples_in_batch)</td></tr>
<tr class="separator:acc0bb9e26d23850e19f00663bee86bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44e74967c30e4bc0faf54a1d50cab79d"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a44e74967c30e4bc0faf54a1d50cab79d">update_data_reader</a> ()</td></tr>
<tr class="separator:a44e74967c30e4bc0faf54a1d50cab79d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a85b41372e22cba16dddda84983093"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093">get_execution_mode</a> ()</td></tr>
<tr class="separator:a72a85b41372e22cba16dddda84983093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1c8e6038e112145fa6eaf37e6cb3d4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a1a1c8e6038e112145fa6eaf37e6cb3d4">is_current_root</a> ()</td></tr>
<tr class="memdesc:a1a1c8e6038e112145fa6eaf37e6cb3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this rank the current root node for the Elemental Distribution.  <a href="#a1a1c8e6038e112145fa6eaf37e6cb3d4">More...</a><br/></td></tr>
<tr class="separator:a1a1c8e6038e112145fa6eaf37e6cb3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a651f8eab68ea1ca97a9689b372d93293"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a></td></tr>
<tr class="separator:a651f8eab68ea1ca97a9689b372d93293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ccc275f90122c59f3eb966402f521fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a></td></tr>
<tr class="separator:a3ccc275f90122c59f3eb966402f521fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd4635e8e81acf72e9164d91fb3209ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a></td></tr>
<tr class="separator:afd4635e8e81acf72e9164d91fb3209ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a41b1f44f6a79a5ec07bd895d6bcf6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a></td></tr>
<tr class="separator:ad0a41b1f44f6a79a5ec07bd895d6bcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27d55e192717c28ce6785411585e60a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a></td></tr>
<tr class="separator:aa27d55e192717c28ce6785411585e60a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6be7e7aad366708899a949813dc2554f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a></td></tr>
<tr class="separator:a6be7e7aad366708899a949813dc2554f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b29d7ba9e5c4981d911d04fdff64547"><td class="memItemLeft" align="right" valign="top"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a9b29d7ba9e5c4981d911d04fdff64547">m_max_mini_batch_size</a></td></tr>
<tr class="separator:a9b29d7ba9e5c4981d911d04fdff64547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6317ad7cb24eb412983458c79ec94def"><td class="memItemLeft" align="right" valign="top"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a></td></tr>
<tr class="separator:a6317ad7cb24eb412983458c79ec94def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39cc10542de6a808b578460b2a76475c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a></td></tr>
<tr class="separator:a39cc10542de6a808b578460b2a76475c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa595846c85d451799e44d58b8203192d"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">m_num_data_per_epoch</a></td></tr>
<tr class="separator:aa595846c85d451799e44d58b8203192d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd82e203a6580d2f249931817902142e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">m_num_valid_readers</a></td></tr>
<tr class="separator:abd82e203a6580d2f249931817902142e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00038">38</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa35307f86d664e0fd3cc98a645f1589d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::distributed_minibatch_parallel_io::distributed_minibatch_parallel_io </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_parallel_readers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mini_batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>, <a class="el" href="classlbann_1_1DataReader.html">DataReader</a> * &gt;&#160;</td>
          <td class="paramname"><em>data_readers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check to make sure that there is enough training data for all of the parallel readers</p>
<p>Check to make sure that there is enough training data for all of the parallel readers</p>
<p>Check to make sure that there is enough testing data for all of the parallel readers </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00034">34</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  : <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>(num_parallel_readers), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>(num_parallel_readers), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>(num_parallel_readers), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a9b29d7ba9e5c4981d911d04fdff64547">m_max_mini_batch_size</a>(mini_batch_size)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> = 0;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a> = 0;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">m_num_valid_readers</a> = 0;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordtype">int</span> training_data_set_size = 0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">int</span> validation_data_set_size = 0;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordtype">int</span> testing_data_set_size = 0;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">if</span>(data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>] != <a class="code" href="datatype_8hpp.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    training_data_set_size = data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>]-&gt;getNumData();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">if</span>(data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aa617908b172c473cb8e8cda059e55bf0">execution_mode::validation</a>] != <a class="code" href="datatype_8hpp.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    validation_data_set_size = data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aa617908b172c473cb8e8cda059e55bf0">execution_mode::validation</a>]-&gt;getNumData();</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span>(data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aae2b1fca515949e5d54fb22b8ed95575">execution_mode::testing</a>] != <a class="code" href="datatype_8hpp.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    testing_data_set_size = data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aae2b1fca515949e5d54fb22b8ed95575">execution_mode::testing</a>]-&gt;getNumData();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>().Size() &lt; num_parallel_readers) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;Warning the grid size &quot;</span>&lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>().Size()</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;         &lt;&lt;<span class="stringliteral">&quot;is smaller than the number of requested parallel readers &quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;         &lt;&lt;num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>().Size();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>().Size();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>().Size();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">if</span>(training_data_set_size != 0) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">int</span> max_num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">while</span>(ceil((<span class="keywordtype">float</span>)training_data_set_size/(<span class="keywordtype">float</span>)(mini_batch_size * <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a54842b679a3756cf79b43baf46caf637">get_num_models</a>())) &lt; max_num_parallel_readers) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      max_num_parallel_readers--;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span>(max_num_parallel_readers != <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;Warning the training data set size &quot;</span>&lt;&lt;training_data_set_size</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;           &lt;&lt;<span class="stringliteral">&quot; is too small for the number of requested parallel readers &quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;           &lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>&lt;&lt;<span class="stringliteral">&quot;, using &quot;</span>&lt;&lt; max_num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a> = max_num_parallel_readers;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a> = 0;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">if</span>(validation_data_set_size != 0) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">int</span> max_num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">while</span>(ceil((<span class="keywordtype">float</span>)validation_data_set_size/(float)(mini_batch_size * <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a54842b679a3756cf79b43baf46caf637">get_num_models</a>())) &lt; max_num_parallel_readers) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      max_num_parallel_readers--;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span>(max_num_parallel_readers != <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;Warning the validation data set size &quot;</span>&lt;&lt;validation_data_set_size</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;           &lt;&lt;<span class="stringliteral">&quot; is too small for the number of requested parallel readers &quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;           &lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>&lt;&lt;<span class="stringliteral">&quot;, using &quot;</span>&lt;&lt; max_num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a> = max_num_parallel_readers;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a> = 0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span>(testing_data_set_size != 0) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">int</span> max_num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">while</span>(ceil((<span class="keywordtype">float</span>)testing_data_set_size/(float)(mini_batch_size * <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a54842b679a3756cf79b43baf46caf637">get_num_models</a>())) &lt; max_num_parallel_readers) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      max_num_parallel_readers--;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span>(max_num_parallel_readers != <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;Warning the testing data set size &quot;</span>&lt;&lt;testing_data_set_size</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;           &lt;&lt;<span class="stringliteral">&quot; is too small for the number of requested parallel readers &quot;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;           &lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>&lt;&lt;<span class="stringliteral">&quot;, using &quot;</span>&lt;&lt; max_num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a> = max_num_parallel_readers;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a> = 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a9b29d7ba9e5c4981d911d04fdff64547"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a9b29d7ba9e5c4981d911d04fdff64547">lbann::distributed_minibatch_parallel_io::m_max_mini_batch_size</a></div><div class="ttdeci">uint m_max_mini_batch_size</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00062">lbann_distributed_minibatch_parallel_io.hpp:62</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8aa617908b172c473cb8e8cda059e55bf0"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aa617908b172c473cb8e8cda059e55bf0">execution_mode::validation</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8aae2b1fca515949e5d54fb22b8ed95575"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aae2b1fca515949e5d54fb22b8ed95575">execution_mode::testing</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_afd4635e8e81acf72e9164d91fb3209ef"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_training</a></div><div class="ttdeci">int m_num_parallel_readers_training</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00058">lbann_distributed_minibatch_parallel_io.hpp:58</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_ad0a41b1f44f6a79a5ec07bd895d6bcf6"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_validating</a></div><div class="ttdeci">int m_num_parallel_readers_validating</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00059">lbann_distributed_minibatch_parallel_io.hpp:59</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a651f8eab68ea1ca97a9689b372d93293"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">lbann::distributed_minibatch_parallel_io::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00056">lbann_distributed_minibatch_parallel_io.hpp:56</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a54842b679a3756cf79b43baf46caf637"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a54842b679a3756cf79b43baf46caf637">lbann::lbann_comm::get_num_models</a></div><div class="ttdeci">int get_num_models() const </div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00086">lbann_comm.hpp:86</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a6317ad7cb24eb412983458c79ec94def"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">lbann::distributed_minibatch_parallel_io::m_num_samples_in_batch</a></div><div class="ttdeci">uint m_num_samples_in_batch</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00063">lbann_distributed_minibatch_parallel_io.hpp:63</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a3ccc275f90122c59f3eb966402f521fc"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">lbann::distributed_minibatch_parallel_io::m_root</a></div><div class="ttdeci">int m_root</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00057">lbann_distributed_minibatch_parallel_io.hpp:57</a></div></div>
<div class="ttc" id="datatype_8hpp_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="datatype_8hpp.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="datatype_8hpp_source.html#l00035">datatype.hpp:35</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a483bf8a72d44a0e83da45f3d47bd20d4"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">lbann::lbann_comm::get_model_grid</a></div><div class="ttdeci">Grid &amp; get_model_grid()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00084">lbann_comm.hpp:84</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_aa27d55e192717c28ce6785411585e60a"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_testing</a></div><div class="ttdeci">int m_num_parallel_readers_testing</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00060">lbann_distributed_minibatch_parallel_io.hpp:60</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_abd82e203a6580d2f249931817902142e"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">lbann::distributed_minibatch_parallel_io::m_num_valid_readers</a></div><div class="ttdeci">int m_num_valid_readers</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00067">lbann_distributed_minibatch_parallel_io.hpp:67</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph" alt=""/></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph" id="classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::\lget_model_grid" alt="" coords="225,5,367,46"/><area shape="rect" id="node3" href="classlbann_1_1lbann__comm.html#a54842b679a3756cf79b43baf46caf637" title="lbann::lbann_comm::\lget_num_models" alt="" coords="225,70,367,111"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac5d6b3b6740f91ef083eeac3cc52c10a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::distributed_minibatch_parallel_io::distribute_from_local_matrix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&#160;</td>
          <td class="paramname"><em>M_local</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#aaf89a79f1476644edba844c4937abbcc">CircMat</a> &amp;&#160;</td>
          <td class="paramname"><em>Ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00139">139</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                                                                                   {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordtype">int</span> num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">m_num_valid_readers</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  Ms.SetRoot(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a6086ced12c3eefeea6e2a78eff286983">model_barrier</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">get_rank_in_model</a>() == <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      stringstream err;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      err &lt;&lt; __FILE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __LINE__ </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; :: lbann_distributed_minibatch_parallel_io: No valid data for this step -- local data was invalid&quot;</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        lbann_exception(err.str());</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    CopyFromRoot(M_local, Ms);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a> = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    CopyFromNonRoot(Ms);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a6086ced12c3eefeea6e2a78eff286983">model_barrier</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> = (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> + 1) % num_parallel_readers;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a206bafe522a0962c450f4fc69d030656"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">lbann::lbann_comm::get_rank_in_model</a></div><div class="ttdeci">int get_rank_in_model() const </div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00062">lbann_comm.hpp:62</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a651f8eab68ea1ca97a9689b372d93293"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">lbann::distributed_minibatch_parallel_io::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00056">lbann_distributed_minibatch_parallel_io.hpp:56</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a6317ad7cb24eb412983458c79ec94def"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">lbann::distributed_minibatch_parallel_io::m_num_samples_in_batch</a></div><div class="ttdeci">uint m_num_samples_in_batch</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00063">lbann_distributed_minibatch_parallel_io.hpp:63</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a6086ced12c3eefeea6e2a78eff286983"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a6086ced12c3eefeea6e2a78eff286983">lbann::lbann_comm::model_barrier</a></div><div class="ttdeci">void model_barrier()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8cpp_source.html#l00164">lbann_comm.cpp:164</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a3ccc275f90122c59f3eb966402f521fc"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">lbann::distributed_minibatch_parallel_io::m_root</a></div><div class="ttdeci">int m_root</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00057">lbann_distributed_minibatch_parallel_io.hpp:57</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a39cc10542de6a808b578460b2a76475c"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">lbann::distributed_minibatch_parallel_io::m_local_data_valid</a></div><div class="ttdeci">bool m_local_data_valid</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00064">lbann_distributed_minibatch_parallel_io.hpp:64</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_abd82e203a6580d2f249931817902142e"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">lbann::distributed_minibatch_parallel_io::m_num_valid_readers</a></div><div class="ttdeci">int m_num_valid_readers</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00067">lbann_distributed_minibatch_parallel_io.hpp:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa62a8e46c053771fe20831f81aeb0a25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int lbann::distributed_minibatch_parallel_io::fetch_from_data_reader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&#160;</td>
          <td class="paramname"><em>M_local</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#ac848395e55b96cf53462d67efc42efb9">lbann::target_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#a63ac1e19f5ef461c23496a5169eaa3f4">lbann::input_layer_distributed_minibatch_parallel_io</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00047">47</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{ <span class="keywordflow">return</span> 0; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5cc95374bcb47c97105b387950ca8e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::fetch_to_local_matrix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&#160;</td>
          <td class="paramname"><em>M_local</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check to see if this rank has valid data &ndash; if not read in the next batch Coordinate all available readers so that the perform I/O in the same step</p>
<p>Each data reader needs to either have independent / split data, or take an offset / stride </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00115">115</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                                                              {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordtype">int</span> num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">get_num_parallel_readers</a>();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> == 0) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">get_rank_in_model</a>() &lt; num_parallel_readers &amp;&amp; !<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a>) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      Zero(M_local);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa62a8e46c053771fe20831f81aeb0a25">fetch_from_data_reader</a>(M_local);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keywordtype">bool</span> data_valid = (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a> &gt; 0);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">if</span>(data_valid) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">m_num_data_per_epoch</a>+=<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#acc0bb9e26d23850e19f00663bee86bcd">preprocess_data_samples</a>(M_local, <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a> = data_valid;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">m_num_valid_readers</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#ab2bc3d526045ba1b5fedcd442b58a8f9">model_allreduce</a>((<span class="keywordtype">int</span>) <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a>, mpi::SUM);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">m_num_samples_in_batch</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a206bafe522a0962c450f4fc69d030656"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">lbann::lbann_comm::get_rank_in_model</a></div><div class="ttdeci">int get_rank_in_model() const </div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00062">lbann_comm.hpp:62</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_acc0bb9e26d23850e19f00663bee86bcd"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#acc0bb9e26d23850e19f00663bee86bcd">lbann::distributed_minibatch_parallel_io::preprocess_data_samples</a></div><div class="ttdeci">virtual void preprocess_data_samples(Mat &amp;M_local, int num_samples_in_batch)</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00048">lbann_distributed_minibatch_parallel_io.hpp:48</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a6be7e7aad366708899a949813dc2554f"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">lbann::distributed_minibatch_parallel_io::m_local_reader_done</a></div><div class="ttdeci">int m_local_reader_done</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00061">lbann_distributed_minibatch_parallel_io.hpp:61</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a651f8eab68ea1ca97a9689b372d93293"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">lbann::distributed_minibatch_parallel_io::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00056">lbann_distributed_minibatch_parallel_io.hpp:56</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_aa62a8e46c053771fe20831f81aeb0a25"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#aa62a8e46c053771fe20831f81aeb0a25">lbann::distributed_minibatch_parallel_io::fetch_from_data_reader</a></div><div class="ttdeci">virtual int fetch_from_data_reader(Mat &amp;M_local)</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00047">lbann_distributed_minibatch_parallel_io.hpp:47</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a6317ad7cb24eb412983458c79ec94def"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a6317ad7cb24eb412983458c79ec94def">lbann::distributed_minibatch_parallel_io::m_num_samples_in_batch</a></div><div class="ttdeci">uint m_num_samples_in_batch</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00063">lbann_distributed_minibatch_parallel_io.hpp:63</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_aa595846c85d451799e44d58b8203192d"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">lbann::distributed_minibatch_parallel_io::m_num_data_per_epoch</a></div><div class="ttdeci">long m_num_data_per_epoch</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00066">lbann_distributed_minibatch_parallel_io.hpp:66</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a3ccc275f90122c59f3eb966402f521fc"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">lbann::distributed_minibatch_parallel_io::m_root</a></div><div class="ttdeci">int m_root</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00057">lbann_distributed_minibatch_parallel_io.hpp:57</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_ae63fb14ed9851fdebd6fde53a15b450d"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">lbann::distributed_minibatch_parallel_io::get_num_parallel_readers</a></div><div class="ttdeci">int get_num_parallel_readers()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00203">lbann_distributed_minibatch_parallel_io.cpp:203</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_ab2bc3d526045ba1b5fedcd442b58a8f9"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#ab2bc3d526045ba1b5fedcd442b58a8f9">lbann::lbann_comm::model_allreduce</a></div><div class="ttdeci">T model_allreduce(T send, mpi::Op op=mpi::SUM)</div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00218">lbann_comm.hpp:218</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a39cc10542de6a808b578460b2a76475c"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">lbann::distributed_minibatch_parallel_io::m_local_data_valid</a></div><div class="ttdeci">bool m_local_data_valid</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00064">lbann_distributed_minibatch_parallel_io.hpp:64</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_abd82e203a6580d2f249931817902142e"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">lbann::distributed_minibatch_parallel_io::m_num_valid_readers</a></div><div class="ttdeci">int m_num_valid_readers</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00067">lbann_distributed_minibatch_parallel_io.hpp:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a72a85b41372e22cba16dddda84983093"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a> lbann::distributed_minibatch_parallel_io::get_execution_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a1656c9772680bc8d4ba8277274c6f27d">lbann::target_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ae315930bffeade2c03d774af71810236">lbann::input_layer_distributed_minibatch_parallel_io</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00050">50</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8afedb2d84cafe20862cb4399751a8a7e3">execution_mode::invalid</a>; }</div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8afedb2d84cafe20862cb4399751a8a7e3"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8afedb2d84cafe20862cb4399751a8a7e3">execution_mode::invalid</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae63fb14ed9851fdebd6fde53a15b450d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::get_num_parallel_readers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00203">203</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                                                     {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordtype">int</span> num_parallel_readers = 0;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093">get_execution_mode</a>()) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>:</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aa617908b172c473cb8e8cda059e55bf0">execution_mode::validation</a>:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aae2b1fca515949e5d54fb22b8ed95575">execution_mode::testing</a>:</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    stringstream err;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    err &lt;&lt; __FILE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt;  __LINE__</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; :: lbann_distributed_minibatch_parallel_io: invalid execution phase&quot;</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">throw</span> lbann_exception(err.str());</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">return</span> num_parallel_readers;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a72a85b41372e22cba16dddda84983093"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093">lbann::distributed_minibatch_parallel_io::get_execution_mode</a></div><div class="ttdeci">virtual execution_mode get_execution_mode()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00050">lbann_distributed_minibatch_parallel_io.hpp:50</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8aa617908b172c473cb8e8cda059e55bf0"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aa617908b172c473cb8e8cda059e55bf0">execution_mode::validation</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8aae2b1fca515949e5d54fb22b8ed95575"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aae2b1fca515949e5d54fb22b8ed95575">execution_mode::testing</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_afd4635e8e81acf72e9164d91fb3209ef"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_training</a></div><div class="ttdeci">int m_num_parallel_readers_training</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00058">lbann_distributed_minibatch_parallel_io.hpp:58</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_ad0a41b1f44f6a79a5ec07bd895d6bcf6"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_validating</a></div><div class="ttdeci">int m_num_parallel_readers_validating</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00059">lbann_distributed_minibatch_parallel_io.hpp:59</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_aa27d55e192717c28ce6785411585e60a"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_testing</a></div><div class="ttdeci">int m_num_parallel_readers_testing</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00060">lbann_distributed_minibatch_parallel_io.hpp:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1a1c8e6038e112145fa6eaf37e6cb3d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::distributed_minibatch_parallel_io::is_current_root </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is this rank the current root node for the Elemental Distribution. </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00053">53</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{ <span class="keywordflow">return</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">get_rank_in_model</a>() == <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>); }</div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a206bafe522a0962c450f4fc69d030656"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">lbann::lbann_comm::get_rank_in_model</a></div><div class="ttdeci">int get_rank_in_model() const </div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00062">lbann_comm.hpp:62</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a651f8eab68ea1ca97a9689b372d93293"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">lbann::distributed_minibatch_parallel_io::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00056">lbann_distributed_minibatch_parallel_io.hpp:56</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a3ccc275f90122c59f3eb966402f521fc"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">lbann::distributed_minibatch_parallel_io::m_root</a></div><div class="ttdeci">int m_root</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00057">lbann_distributed_minibatch_parallel_io.hpp:57</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph" alt=""/></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph" id="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656" title="lbann::lbann_comm::\lget_rank_in_model" alt="" coords="187,11,330,53"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a17aa20ba6b971b6433da058be0d4545a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::distributed_minibatch_parallel_io::is_data_set_processed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Make sure that all local data has been processed</p>
<p>Set the reduction variable</p>
<p>Once all of the readers have finished their part of the mini-batch indicate that the epoch is finished</p>
<p>When the epoch is finished, make sure that the root node for distributing data is reset because if the number of parallel readers does not evenly divide the data set size, the epoch will finish without all of the parallel readers participating in the last round. </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00165">165</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                                                   {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordtype">int</span> num_readers_done = 0;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">int</span> max_active_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">get_num_parallel_readers</a>();  <span class="comment">// When calculating if all parallel readers are done, include the maximum number,</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                                                 <span class="comment">// not just the ones in the last round.  This will ensure that all readers, that had data</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                                                 <span class="comment">// will have distributed it.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordtype">int</span> num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">m_num_valid_readers</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">get_rank_in_model</a>() &lt; num_parallel_readers) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">get_rank_in_model</a>()+1)%num_parallel_readers == <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a>) { </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        stringstream err;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        err &lt;&lt; __FILE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt;  __LINE__</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; :: lbann_input_layer_distributed_minibatch_parallel_io: all valid data was not processed.&quot;</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">throw</span> lbann_exception(err.str());</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a> = !<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a44e74967c30e4bc0faf54a1d50cab79d">update_data_reader</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a>) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    num_readers_done = 1;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  num_readers_done = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#ab2bc3d526045ba1b5fedcd442b58a8f9">model_allreduce</a>(num_readers_done);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">if</span>(num_readers_done == max_active_parallel_readers) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> = 0; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">m_num_data_per_epoch</a> = 0;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a206bafe522a0962c450f4fc69d030656"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656">lbann::lbann_comm::get_rank_in_model</a></div><div class="ttdeci">int get_rank_in_model() const </div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00062">lbann_comm.hpp:62</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a6be7e7aad366708899a949813dc2554f"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">lbann::distributed_minibatch_parallel_io::m_local_reader_done</a></div><div class="ttdeci">int m_local_reader_done</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00061">lbann_distributed_minibatch_parallel_io.hpp:61</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a651f8eab68ea1ca97a9689b372d93293"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">lbann::distributed_minibatch_parallel_io::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00056">lbann_distributed_minibatch_parallel_io.hpp:56</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a44e74967c30e4bc0faf54a1d50cab79d"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a44e74967c30e4bc0faf54a1d50cab79d">lbann::distributed_minibatch_parallel_io::update_data_reader</a></div><div class="ttdeci">virtual bool update_data_reader()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00049">lbann_distributed_minibatch_parallel_io.hpp:49</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_aa595846c85d451799e44d58b8203192d"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">lbann::distributed_minibatch_parallel_io::m_num_data_per_epoch</a></div><div class="ttdeci">long m_num_data_per_epoch</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00066">lbann_distributed_minibatch_parallel_io.hpp:66</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a3ccc275f90122c59f3eb966402f521fc"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">lbann::distributed_minibatch_parallel_io::m_root</a></div><div class="ttdeci">int m_root</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00057">lbann_distributed_minibatch_parallel_io.hpp:57</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_ae63fb14ed9851fdebd6fde53a15b450d"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">lbann::distributed_minibatch_parallel_io::get_num_parallel_readers</a></div><div class="ttdeci">int get_num_parallel_readers()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00203">lbann_distributed_minibatch_parallel_io.cpp:203</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_ab2bc3d526045ba1b5fedcd442b58a8f9"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#ab2bc3d526045ba1b5fedcd442b58a8f9">lbann::lbann_comm::model_allreduce</a></div><div class="ttdeci">T model_allreduce(T send, mpi::Op op=mpi::SUM)</div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00218">lbann_comm.hpp:218</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_a39cc10542de6a808b578460b2a76475c"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">lbann::distributed_minibatch_parallel_io::m_local_data_valid</a></div><div class="ttdeci">bool m_local_data_valid</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00064">lbann_distributed_minibatch_parallel_io.hpp:64</a></div></div>
<div class="ttc" id="classlbann_1_1distributed__minibatch__parallel__io_html_abd82e203a6580d2f249931817902142e"><div class="ttname"><a href="classlbann_1_1distributed__minibatch__parallel__io.html#abd82e203a6580d2f249931817902142e">lbann::distributed_minibatch_parallel_io::m_num_valid_readers</a></div><div class="ttdeci">int m_num_valid_readers</div><div class="ttdef"><b>Definition:</b> <a href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00067">lbann_distributed_minibatch_parallel_io.hpp:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acc0bb9e26d23850e19f00663bee86bcd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void lbann::distributed_minibatch_parallel_io::preprocess_data_samples </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&#160;</td>
          <td class="paramname"><em>M_local</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_samples_in_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#af0866c6c725c0938d388fea84f3ad398">lbann::target_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ad6fee7878bdf7b3f3f0c43ff4e0e0b20">lbann::input_layer_distributed_minibatch_parallel_io</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00048">48</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44e74967c30e4bc0faf54a1d50cab79d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool lbann::distributed_minibatch_parallel_io::update_data_reader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a06800a7f630fef832057bd232911efb2">lbann::target_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#adc092363f45b022429bf094ce1633f56">lbann::input_layer_distributed_minibatch_parallel_io</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00049">49</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a651f8eab68ea1ca97a9689b372d93293"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a>* lbann::distributed_minibatch_parallel_io::comm</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00056">56</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a39cc10542de6a808b578460b2a76475c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::distributed_minibatch_parallel_io::m_local_data_valid</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of samples in the current mini-batch </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00064">64</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6be7e7aad366708899a949813dc2554f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::m_local_reader_done</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of parallel readers (I/O streams) for testing data </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00061">61</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9b29d7ba9e5c4981d911d04fdff64547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> lbann::distributed_minibatch_parallel_io::m_max_mini_batch_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00062">62</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa595846c85d451799e44d58b8203192d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lbann::distributed_minibatch_parallel_io::m_num_data_per_epoch</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Has the layer copied valid data into the local matrix </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00066">66</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa27d55e192717c28ce6785411585e60a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_testing</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of parallel readers (I/O streams) for testing data </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00060">60</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="afd4635e8e81acf72e9164d91fb3209ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_training</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Which rank is the root of the CircMat </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00058">58</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad0a41b1f44f6a79a5ec07bd895d6bcf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_validating</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of parallel readers (I/O streams) for training data </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00059">59</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6317ad7cb24eb412983458c79ec94def"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> lbann::distributed_minibatch_parallel_io::m_num_samples_in_batch</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum size of the mini-batch </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00063">63</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="abd82e203a6580d2f249931817902142e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::m_num_valid_readers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00067">67</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3ccc275f90122c59f3eb966402f521fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::m_root</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00057">57</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/travis/build/LLNL/lbann/include/lbann/io/<a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a></li>
<li>/home/travis/build/LLNL/lbann/src/io/<a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacelbann.html">lbann</a></li><li class="navelem"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html">distributed_minibatch_parallel_io</a></li>
    <li class="footer">Generated on Tue Jun 6 2017 16:49:03 for LBANN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
